LISTEN(2)                  Linux Programmcısının Kılavuzu               LISTEN(2)

İSİM
        listen - soket üzerinde bağlantıları dinle

KULLANIM
       #include <sys/types.h>          /* NOTLAR'a bakın */
       #include <sys/socket.h>

       int listen(int sockfd, int backlog);

AÇIKLAMA
        listen(), sockfd ile gösterilen soketi pasif soket olarak işaretler ve
        accept(2) ile gelen bağlantı isteklerini kabul edecek sokete dönüştürür.

        sockfd argümanı SOCK_STREAM veya SOCK_SEQPACKET ile gösterilen bir dosya
        tanımlayıcısıdır.

        Eğer sıra tam dolu olduğunda bir bağlantı isteği gelirse, istemci ECONNREFUSED
        hatası alabilir veya kullanılan protokol yeniden iletime müsade ediyorsa,
        bağlantı isteği görmezden gelinir, böylece tekrar gelen bağlantı isteği kabul 
        edilir.

DÖNÜŞ DEĞERİ
        Başarılı olduğunda sıfır döndürülür. Hata olduğunda -1 döndürülür ve 
        errno'ya uygun bir değer atanır.

HATALAR
        EADDRINUSE
                Başka bir soket aynı port'ta dinliyor.

        EADDRINUSE
                (İnternet domain soketleri) sockfd ile belirtilen soket, önceden bir
                adres ile bağlanmamış ve soketi geçici bir porta bağlamaya çalışırken
                geçici port aralığındaki tüm değerlerin kullanımda olduğu anlaşılmış.
                ip(7)'deki /proc/sys/net/ipv4/ip_local_port_range tartışmaya bakın.

        EBADF  Verilen sockfd uygun bir dosya tanımlayıcısı değil.

        ENOTSOCK
               Verilen sockfd'nin bir soketle ilgisi yok.
        
        EOPNOTSUPP
                Soket, listen()'ı destekleyen türden değil.

UYGUN
       POSIX.1-2001, POSIX.1-2008, 4.4BSD (listen() ilk defa 4.2BSD ile ortaya çıktı).

NOTLAR
        Bağlantıları kabul etmek için verilen adımlar uygulanır:

                1. socket(2) ile socket oluşturulur.

                2. Diğer soketlerin oluşturulan sokete bağlanabilmesi için
                   oluşturulan soket, bind(2) kullanılarak lokal adres ile bağlanır.

                3. Gelen bağlantıları kabul etme isteği ve gelen bağlantılar için
                   sıra limiti listen() ile belirtilir.

                4. Gelen bağlantılar accept() ile kabul edilir.

        POSIX.1'de, <sys/types.h> dahil edilmeyi gerektirmez ve yine bu başlık dosyası
        Linux'da gerekmez. Fakat bazı tarihsel (BSD) uygulamalardan ötürü bu başlık
        gerekir, taşınabilir uygulamalar için dahil edilmesi akıllıca olacaktır.

        backlog argümanının TCP soketleri üzerindeki etkisi Linux 2.2 ile beraber
        değişti. Şimdi, tamamlanmamış bağlantı isteklerinin sıra uzunluğunu belirlemek
        yerine, kabul edilmeyi bekleyen kurulmuş soketlerin sıra uzunluğunu belirler.

        Eğer backlog değeri /proc/sys/net/core/somaxonn'dan daha büyükse, bu değere düşürülür. 
        Linux 5.4'ten bu yana bu dosyanın varsayılan değeri 4096'dır; eski çekirdeklerde 
        varsayılan değer 128'di. 2.4.15'ten önceki çekirdeklerde SOMAXCONN'a 128 değeriyle 
        sabit kodlanmıştı.

ÖRNEKLER
        bind(2)'ye bakın.

İLGİLİ FONKSİYONLAR
       accept(2), bind(2), connect(2), socket(2), socket(7)

ÇEVİREN
        Fatih Koçer
